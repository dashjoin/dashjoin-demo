(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{34701:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return D}});var s=n(67294),i=n(66678),r=n.n(i),o=n(18446),a=n.n(o),l=n(57557),d=n.n(l),u=n(31921),h=n.n(u),p=n(27361),m=n.n(p),c=n(4615);function g(t){return!!t&&t===Object(t)&&!(t instanceof Date)}var b=n(34356);function v(t){let e=0;return()=>`${t}-${("000"+(e++).toString(36)).slice(-4)}`}let f=v("uniforms");class C extends s.Component{constructor(t){super(t),this.state={changed:!1,changedMap:Object.create(null),resetCount:0,submitted:!1,submitting:!1},this.mounted=!1,this.randomId=function(t=f()){return v(t)}(this.props.id),this.onReset=this.reset=this.onReset.bind(this),this.onChange=this.change=this.onChange.bind(this),this.onSubmit=this.submit=this.onSubmit.bind(this);let e=this.getModel.bind(this);this.getModel=(t,n=e(t))=>void 0!==t&&this.props.modelTransform?this.props.modelTransform(t,n):n}componentDidMount(){this.mounted=!0}componentDidUpdate(t,e,n){}componentWillUnmount(){this.mounted=!1,this.delayId&&clearTimeout(this.delayId),this.setState=()=>{}}getContext(){return{changed:this.state.changed,changedMap:this.state.changedMap,error:this.getContextError(),formRef:this,model:this.getContextModel(),name:this.getContextName(),onChange:this.getContextOnChange(),onSubmit:this.getContextOnSubmit(),randomId:this.randomId,schema:this.getContextSchema(),state:this.getContextState(),submitted:this.state.submitted,submitting:this.state.submitting,validating:!1}}getContextName(){return[]}getContextError(){return this.props.error}getContextModel(){return this.getModel("form")}getContextState(){return{disabled:!!this.props.disabled,label:!!this.props.label,placeholder:!!this.props.placeholder,readOnly:!!this.props.readOnly,showInlineError:!!this.props.showInlineError}}getContextSchema(){return this.props.schema}getContextOnChange(){return this.onChange}getContextOnSubmit(){return this.onSubmit}getModel(t,e=this.props.model){return e}getNativeFormProps(){return Object.assign(Object.assign({},d()(this.props,["autosave","autosaveDelay","disabled","error","label","model","modelTransform","onChange","onSubmit","placeholder","readOnly","schema","showInlineError"])),{onSubmit:this.onSubmit,key:`reset-${this.state.resetCount}`})}onChange(t,e){if(this.mounted){let n=function(t,e,n){if(!g(e)||n&&typeof e!=typeof n)return a()(e,n)?[]:[t];let s=[t];if(g(n)){for(let i in e)i in n&&a()(e[i],n[i])||s.push((0,c.m)(t,i));for(let i in n)i in e||s.push((0,c.m)(t,i));1===s.length&&s.pop()}else for(let n in e)s.push((0,c.m)(t,n));return s}(t,e,m()(this.getModel(),t));0!==n.length&&this.setState(t=>t.changed&&n.every(e=>!!m()(t.changedMap,e))?null:{changed:!0,changedMap:n.reduce((t,e)=>h()(t,e,{},r()),r()(t.changedMap))})}this.props.onChange&&this.props.onChange(t,e),this.mounted&&this.props.autosave&&(this.delayId&&(this.delayId=clearTimeout(this.delayId)),this.delayId=setTimeout(()=>{this.setState(()=>null,()=>{this.onSubmit()})},this.props.autosaveDelay))}__reset(t){return{changed:!1,changedMap:Object.create(null),resetCount:t.resetCount+1,submitted:!1,submitting:!1}}onReset(){this.setState(this.__reset)}onSubmit(t){t&&(t.preventDefault(),t.stopPropagation()),this.setState(t=>t.submitted?null:{submitted:!0});let e=this.props.onSubmit(this.getModel("submit"));return e instanceof Promise?(this.setState({submitting:!0}),e.finally(()=>{this.setState({submitting:!1})})):Promise.resolve()}render(){return s.createElement(b.D.Provider,{value:this.getContext()},s.createElement("form",Object.assign({},this.getNativeFormProps())))}}C.displayName="Form",C.defaultProps={autosave:!1,autosaveDelay:0,error:null,label:!0,model:Object.create(null),noValidate:!0,onSubmit(){}};var S=n(97582);function y(t){class e extends t{getNativeFormProps(){let t=super.getNativeFormProps(),{autoField:e=this.getAutoField(),errorsField:n=this.getErrorsField(),submitField:i=this.getSubmitField()}=t,r=(0,S._T)(t,["autoField","errorsField","submitField"]);return r.children||(r.children=this.getContextSchema().getSubfields().map(t=>s.createElement(e,{key:t,name:t})).concat([s.createElement(n,{key:"$ErrorsField"}),s.createElement(i,{key:"$SubmitField"})])),r}getAutoField(){return()=>null}getErrorsField(){return()=>null}getSubmitField(){return()=>null}}return e.Quick=y,e.displayName=`Quick${t.displayName}`,e}y(C);var x=n(50361),O=n.n(x),M=n(50308),F=n.n(M);function j(t){class e extends t{constructor(t){super(t),this.state=Object.assign(Object.assign({},this.state),{error:null,validate:!1,validating:!1,validator:this.getContextSchema().getValidator(t.validator)}),this.onValidate=this.validate=this.onValidate.bind(this),this.onValidateModel=this.validateModel=this.onValidateModel.bind(this)}getContextError(){var t;return null!==(t=super.getContextError())&&void 0!==t?t:this.state.error}getContext(){return Object.assign(Object.assign({},super.getContext()),{validating:this.state.validating})}getNativeFormProps(){let t=super.getNativeFormProps();return d()(t,["onValidate","validate","validator"])}componentDidUpdate(t,e,n){super.componentDidUpdate(t,e,n);let{model:s,schema:i,validate:r,validator:o}=this.props;i!==t.schema||o!==t.validator?this.setState({validator:i.getValidator(o)},()=>{P(r,this.state.validate)&&this.onValidate()}):!a()(s,t.model)&&P(r,this.state.validate)&&this.onValidateModel(s)}onChange(t,e){P(this.props.validate,this.state.validate)&&this.onValidate(t,e),super.onChange(t,e)}__reset(t){return Object.assign(Object.assign({},super.__reset(t)),{error:null,validate:!1,validating:!1})}onSubmit(t){t&&(t.preventDefault(),t.stopPropagation()),this.setState({submitted:!0,validate:!0});let e=this.onValidate().then(t=>null!==t?Promise.reject(t):super.onSubmit().catch(t=>{throw this.setState({error:t}),t}));return e.catch(F()),e}onValidate(t,e){let n=this.getContextModel();return n&&t&&(n=h()(r()(n),t,O()(e),r())),this.onValidateModel(n)}onValidateModel(t){var e;let n=this.getModel("validate",t),s=(e=()=>{this.setState({validating:!0})},function(t,n){return t instanceof Promise?(e(),t.then(n)):n(t)});return s(this.state.validator(n),(t=null)=>s(this.props.onValidate(n,t),(t=null)=>{var e;return t=this.props.error===t?null:t,this.setState(e=>e.error!==t||e.validating?{error:t,validating:!1}:null),Promise.resolve(null!==(e=this.props.error)&&void 0!==e?e:t)}))}}return e.Validated=j,e.displayName=`Validated${t.displayName}`,e.defaultProps=Object.assign(Object.assign({},t.defaultProps),{onValidate:(t,e)=>e,validate:"onChangeAfterSubmit"}),e}function P(t,e){return"onChange"===t||"onChangeAfterSubmit"===t&&e}j(C);let E=function t(e){class n extends e{constructor(t){super(t),this.state=Object.assign(Object.assign({},this.state),{model:t.model})}componentDidUpdate(t,e,n){let{model:s}=this.props;a()(s,t.model)||this.setState({model:s}),super.componentDidUpdate(t,e,n)}getNativeFormProps(){let t=super.getNativeFormProps();return d()(t,["onChangeModel"])}getModel(t){return this.state.model}onChange(t,e){super.onChange(t,e),this.setState(n=>({model:h()(r()(n.model),t,e,r())}),()=>{this.props.onChangeModel&&this.props.onChangeModel(this.state.model)})}__reset(t){return Object.assign(Object.assign({},super.__reset(t)),{model:this.props.model})}}return n.Auto=t,n.displayName=`Auto${e.displayName}`,n}(j(y(C)));var N=n(96569),V=function(t){var e=t.children;return s.createElement(N.Z.componentDetectorContext.Provider,{value:function(t,e){var n,s;return null===(s=null===(n=t.showIf)||void 0===n?void 0:n.call(t,e.model))||void 0===s||s?t._customComponent?t._customComponent:N.Z.defaultComponentDetector(t,e):function(){return null}}},e)},_=function(){return(_=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},D=(0,s.forwardRef)(function(t,e){return s.createElement(V,null,s.createElement(E,_({},t,{ref:e})))})},66678:function(t,e,n){var s=n(85990);t.exports=function(t){return s(t,4)}},31921:function(t,e,n){var s=n(10611);t.exports=function(t,e,n,i){return i="function"==typeof i?i:void 0,null==t?t:s(t,e,n,i)}}}]);